<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tomel999</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        purple: {
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                        },
                        indigo: {
                            300: '#a5b4fc',
                            500: '#6366f1',
                            600: '#4f46e5',
                        },
                        spotify: {
                            500: '#1DB954',
                            400: '#1ED760',
                            600: '#1AA34A'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <!-- Background Animation -->
    <div id="vanta-bg" class="fixed inset-0 z-0"></div>

    <!-- Audio Player - UKRYTY -->
    <audio id="background-music" loop autoplay>
        <source src="music.mp3" type="audio/mpeg">
        Twoja przeglƒÖdarka nie obs≈Çuguje elementu audio.
    </audio>

    <!-- Floating Music Control -->
    <div id="music-control" class="fixed bottom-4 right-4 z-50 bg-gray-800/80 backdrop-blur-sm rounded-full p-3 shadow-lg border border-purple-500/30 cursor-pointer hover:bg-gray-700/80 transition-all duration-300 group">
        <i id="music-icon" data-feather="pause" class="w-6 h-6 text-purple-400 group-hover:text-purple-300"></i>
    </div>

    <!-- Main Content -->
    <div class="relative z-10 container mx-auto px-4 py-8 max-w-md">
        <!-- User Profile Section -->
        <section id="profile" class="text-center mb-8 animate-fade-in">
            <div class="relative inline-block mb-4">
                <img id="avatar" src="http://static.photos/abstract/200x200/42" alt="User Avatar" 
                     class="w-32 h-32 rounded-full border-4 border-indigo-300 shadow-lg mx-auto">
                <!-- Zaktualizowany status Discord -->
                <div id="status" class="absolute bottom-2 right-2 w-6 h-6 rounded-full border-3 border-gray-900 bg-gray-500 flex items-center justify-center">
                    <div id="status-inner" class="w-3 h-3 rounded-full"></div>
                </div>
            </div>
            <h1 id="username" class="text-2xl font-bold text-purple-400 mb-2">Loading...</h1>
            <p id="bio" class="text-gray-300 mb-4">Minecraft player with some skills with coding</p>
            
            <!-- Sekcja aktywno≈õci Discord - UKRYWANA GDY BRAK AKTYWNO≈öCI -->
            <div id="discord-activity" class="hidden bg-gray-800/90 rounded-xl p-4 max-w-md mx-auto border-l-4 border-purple-500 shadow-lg">
                <div class="flex items-start space-x-4">
                    <!-- Obrazek gry -->
                    <div class="relative flex-shrink-0">
                        <div class="relative">
                            <img id="activity-image" src="" alt="Activity" 
                                 class="w-16 h-16 rounded-xl object-cover shadow-md border-2 border-gray-700">
                            <!-- Ma≈Çy obrazek statusu -->
                            <div id="activity-small-image" class="absolute -bottom-1 -right-1 w-5 h-5 rounded-full border-2 border-gray-900 bg-cover bg-center"></div>
                        </div>
                    </div>
                    
                    <!-- Szczeg√≥≈Çy aktywno≈õci -->
                    <div class="flex-1 min-w-0 text-left">
                        <div class="flex items-center space-x-2 mb-1">
                            <span id="activity-type" class="text-xs font-bold text-purple-400 uppercase tracking-wide">PLAYING</span>
                            <span class="text-gray-500">‚Ä¢</span>
                            <span id="activity-time" class="text-xs text-gray-400 font-medium">5m</span>
                        </div>
                        
                        <h3 id="activity-name" class="font-bold text-white text-lg mb-1 truncate">Minecraft</h3>
                        
                        <div class="space-y-1">
                            <p id="activity-details" class="text-sm text-gray-200 font-medium truncate">Ogulniega Minecraft</p>
                            <p id="activity-state" class="text-sm text-gray-400 truncate">Najlepszy klient pod wydajno≈õƒá</p>
                            <p id="activity-additional" class="text-sm text-purple-400 truncate">Pobierz na ‚Üí ogulnie.ga</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SEKCJA DLA SPOTIFY -->
            <div id="spotify-activity" class="hidden bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl p-4 max-w-md mx-auto border-l-4 border-spotify-500 shadow-lg">
                <div class="flex items-center space-x-4">
                    <!-- Ok≈Çadka albumu -->
                    <div class="relative flex-shrink-0">
                        <img id="spotify-album-cover" src="" alt="Album Cover" 
                             class="w-16 h-16 rounded-lg object-cover shadow-lg">
                        <!-- Animacja odtwarzania -->
                        <div id="spotify-playing-animation" class="absolute -bottom-1 -right-1 flex space-x-1">
                            <div class="w-1 h-3 bg-spotify-500 rounded-full animate-pulse"></div>
                            <div class="w-1 h-2 bg-spotify-500 rounded-full animate-pulse" style="animation-delay: 0.1s"></div>
                            <div class="w-1 h-3 bg-spotify-500 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                        </div>
                    </div>
                    
                    <!-- Szczeg√≥≈Çy utworu -->
                    <div class="flex-1 min-w-0 text-left">
                        <div class="flex items-center space-x-2 mb-1">
                            <i data-feather="music" class="w-3 h-3 text-spotify-500"></i>
                            <span id="spotify-activity-type" class="text-xs font-bold text-spotify-400 uppercase tracking-wide">LISTENING TO SPOTIFY</span>
                            <span class="text-gray-500">‚Ä¢</span>
                            <span id="spotify-time" class="text-xs text-gray-400 font-medium">2:45</span>
                        </div>
                        
                        <h3 id="spotify-song-title" class="font-bold text-white text-lg mb-1 truncate">Money Sex Codeine - Remix</h3>
                        <p id="spotify-song-artist" class="text-sm text-gray-300 truncate">Who$: Sleet</p>
                        <p id="spotify-song-album" class="text-xs text-gray-400 truncate">Money Sex Codeine (Remix)</p>
                        
                        <!-- Pasek postƒôpu utworu -->
                        <div class="mt-2">
                            <div class="flex justify-between text-xs text-gray-400 mb-1">
                                <span id="spotify-progress-current">2:01</span>
                                <span id="spotify-progress-total">2:00</span>
                            </div>
                            <div class="w-full bg-gray-700 rounded-full h-1">
                                <div id="spotify-progress-bar" class="bg-spotify-500 h-1 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Stary element aktywno≈õci (UKRYWANY GDY BRAK AKTYWNO≈öCI) -->
            <div id="activity" class="bg-gray-800 rounded-lg p-3 max-w-xs mx-auto mt-3 hidden">
                <p id="activity-text" class="text-sm text-gray-400">No current activity</p>
            </div>
        </section>

        <!-- Social Links Section - ZMODYFIKOWANA -->
        <section id="links" class="mb-8 space-y-3">
            <!-- Links will be dynamically generated here -->
        </section>
        
        <!-- Dodatkowa przestrze≈Ñ gdy brak aktywno≈õci -->
        <div id="empty-space" class="h-8"></div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.globe.min.js"></script>
    <script>
        // Vanta.js Background
        VANTA.GLOBE({
            el: "#vanta-bg",
            mouseControls: true,
            touchControls: true,
            gyroControls: false,
            minHeight: 200.00,
            minWidth: 200.00,
            scale: 1.00,
            scaleMobile: 1.00,
            color: "#7c3aed",
            backgroundColor: "#111827",
            size: 0.8
        });

        // Configuration - ZMODYFIKOWANA (Profile template jest teraz aktywny)
        const config = {
            discordUserId: "966388845472006214",
            bio: "Minecraft player with some coding skills",
            links: [
                { platform: "github", url: "https://github.com/tomel999", icon: "github" },
                { platform: "profile", url: "https://tomel999.github.io/template", icon: "user", displayName: "Profile template" },
                { platform: "youtube", url: "#", icon: "youtube", displayName: "Coming Soon" },
                { platform: "spotify", url: "https://open.spotify.com/user/zb7k999oknk3j9uk26mlx1do8", icon: "music" }
            ]
        };

        // Status colors mapping - fioletowe
        const statusColors = {
            online: 'bg-purple-500',
            idle: 'bg-yellow-500',
            dnd: 'bg-red-500',
            offline: 'bg-gray-500'
        };

        const statusBorderColors = {
            online: 'border-purple-400',
            idle: 'border-yellow-400',
            dnd: 'border-red-400',
            offline: 'border-gray-400'
        };

        // Zmienne globalne do ≈õledzenia stanu Spotify
        let currentSpotifyActivity = null;
        let spotifyProgressInterval = null;

        // Audio variables
        let isMusicPlaying = true; // Domy≈õlnie muzyka gra
        const audioPlayer = document.getElementById('background-music');
        const musicControl = document.getElementById('music-control');
        const musicIcon = document.getElementById('music-icon');

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('bio').textContent = config.bio;
            
            const linksContainer = document.getElementById('links');
            config.links.forEach(link => {
                const linkElement = document.createElement('a');
                
                // Dla nieaktywnych link√≥w (tylko YouTube) ustawiamy href="#" i odpowiednie style
                if (link.platform === 'youtube') {
                    linkElement.href = "#";
                    linkElement.addEventListener('click', function(e) {
                        e.preventDefault(); // Zapobiega przej≈õciu do #
                    });
                    linkElement.className = "flex items-center justify-center p-3 bg-gray-600/30 border border-gray-400/30 rounded-lg cursor-not-allowed opacity-70 transition-all duration-300 group";
                } else {
                    // Dla aktywnych link√≥w (GitHub, Profile template, Spotify)
                    linkElement.href = link.url;
                    linkElement.target = "_blank";
                    linkElement.rel = "noopener noreferrer";
                    linkElement.className = "flex items-center justify-center p-3 bg-indigo-500/20 border border-indigo-300/30 rounded-lg hover:bg-purple-500/30 hover:scale-105 transition-all duration-300 group";
                }
                
                // U≈ºyj displayName je≈õli istnieje, w przeciwnym razie u≈ºyj platformy
                const displayText = link.displayName || link.platform.charAt(0).toUpperCase() + link.platform.slice(1);
                
                linkElement.innerHTML = `
                    <i data-feather="${link.icon}" class="w-5 h-5 mr-2 group-hover:text-purple-400"></i>
                    <span class="font-medium">${displayText}</span>
                `;
                linksContainer.appendChild(linkElement);
            });

            // Initialize music control
            musicControl.addEventListener('click', toggleMusic);
            
            // Auto-play music immediately
            audioPlayer.volume = 0.5;
            
            // Spr√≥buj uruchomiƒá muzykƒô automatycznie
            audioPlayer.play().then(() => {
                console.log('Music started automatically');
                isMusicPlaying = true;
                updateMusicIcon();
            }).catch(error => {
                console.log('Auto-play was prevented:', error);
                // Je≈õli autoodtwarzanie zosta≈Ço zablokowane, poka≈º komunikat
                showAutoPlayMessage();
            });

            loadDiscordData();
            feather.replace();
            
            // Ustaw interwa≈Ç do od≈õwie≈ºania danych co 5 sekund
            setInterval(loadDiscordData, 5000);
        });

        // Funkcja pokazujƒÖca komunikat o autoodtwarzaniu
        function showAutoPlayMessage() {
            const message = document.createElement('div');
            message.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-purple-600/90 text-white px-4 py-2 rounded-lg shadow-lg backdrop-blur-sm';
            message.innerHTML = `
                <div class="flex items-center space-x-2">
                    <i data-feather="volume-x" class="w-4 h-4"></i>
                    <span class="text-sm">Kliknij przycisk muzyki aby w≈ÇƒÖczyƒá d≈∫wiƒôk</span>
                </div>
            `;
            document.body.appendChild(message);
            
            feather.replace();
            
            // Usu≈Ñ komunikat po 5 sekundach
            setTimeout(() => {
                message.remove();
            }, 5000);
        }

        // Music control functions
        function toggleMusic() {
            if (isMusicPlaying) {
                audioPlayer.pause();
                isMusicPlaying = false;
            } else {
                audioPlayer.play().then(() => {
                    isMusicPlaying = true;
                }).catch(error => {
                    console.log('Play failed:', error);
                });
            }
            updateMusicIcon();
        }

        function updateMusicIcon() {
            if (isMusicPlaying) {
                musicIcon.setAttribute('data-feather', 'pause');
            } else {
                musicIcon.setAttribute('data-feather', 'play');
            }
            feather.replace();
        }

        // Discord data loading
        async function loadDiscordData() {
            try {
                const response = await fetch(`https://api.lanyard.rest/v1/users/${config.discordUserId}`);
                const data = await response.json();
                
                if (data.success) {
                    const discordData = data.data;
                    
                    // Update avatar and username
                    document.getElementById('avatar').src = `https://cdn.discordapp.com/avatars/${config.discordUserId}/${discordData.discord_user.avatar}.png`;
                    document.getElementById('username').textContent = discordData.discord_user.global_name || discordData.discord_user.username;
                    
                    // Update status
                    const status = discordData.discord_status;
                    const statusElement = document.getElementById('status');
                    const statusInnerElement = document.getElementById('status-inner');
                    
                    statusElement.className = `absolute bottom-2 right-2 w-7 h-7 rounded-full border-3 border-gray-900 flex items-center justify-center ${statusBorderColors[status] || 'border-gray-400'}`;
                    statusInnerElement.className = `w-3.5 h-3.5 rounded-full ${statusColors[status] || 'bg-gray-500'}`;
                    
                    if (status === 'online') {
                        statusInnerElement.classList.add('animate-pulse');
                    } else {
                        statusInnerElement.classList.remove('animate-pulse');
                    }
                    
                    // Update activity - UKRYWANIE GDY BRAK AKTYWNO≈öCI
                    const activities = discordData.activities;
                    if (activities && activities.length > 0) {
                        // Sprawd≈∫ czy jest aktywno≈õƒá Spotify
                        const spotifyActivity = activities.find(activity => 
                            activity.name === 'Spotify' || 
                            activity.application_id === '383226320970055681'
                        );
                        
                        if (spotifyActivity) {
                            // Sprawd≈∫ czy aktywno≈õƒá siƒô zmieni≈Ça
                            if (hasSpotifyActivityChanged(spotifyActivity)) {
                                currentSpotifyActivity = spotifyActivity;
                                updateSpotifyActivityDisplay(spotifyActivity);
                            } else {
                                // Ta sama aktywno≈õƒá - aktualizuj tylko czas
                                updateSpotifyProgress(spotifyActivity.timestamps);
                            }
                        } else {
                            currentSpotifyActivity = null;
                            updateActivityDisplay(activities[0]);
                        }
                    } else {
                        currentSpotifyActivity = null;
                        // UKRYJ WSZYSTKIE ELEMENTY AKTYWNO≈öCI
                        hideAllActivityElements();
                    }
                }
            } catch (error) {
                console.error('Error loading Discord data:', error);
                // W przypadku b≈Çƒôdu, ukryj aktywno≈õƒá
                hideAllActivityElements();
            }
        }

        // Sprawd≈∫ czy aktywno≈õƒá Spotify siƒô zmieni≈Ça
        function hasSpotifyActivityChanged(newActivity) {
            if (!currentSpotifyActivity) return true;
            
            return (
                currentSpotifyActivity.details !== newActivity.details ||
                currentSpotifyActivity.state !== newActivity.state ||
                currentSpotifyActivity.assets?.large_image !== newActivity.assets?.large_image ||
                currentSpotifyActivity.timestamps?.start !== newActivity.timestamps?.start
            );
        }

        function hideAllActivityElements() {
            document.getElementById('discord-activity').classList.add('hidden');
            document.getElementById('spotify-activity').classList.add('hidden');
            document.getElementById('activity').classList.add('hidden');
            
            // Wyczy≈õƒá interwa≈Ç postƒôpu
            if (spotifyProgressInterval) {
                clearInterval(spotifyProgressInterval);
                spotifyProgressInterval = null;
            }
        }

        function updateActivityDisplay(currentActivity) {
            // Ukryj Spotify, poka≈º Discord activity
            document.getElementById('spotify-activity').classList.add('hidden');
            document.getElementById('activity').classList.add('hidden');
            
            const discordActivityElement = document.getElementById('discord-activity');
            discordActivityElement.classList.remove('hidden');
            
            // Ustaw podstawowe informacje
            document.getElementById('activity-type').textContent = getActivityType(currentActivity.type).toUpperCase();
            document.getElementById('activity-name').textContent = currentActivity.name;
            
            // Ustaw czas gry
            if (currentActivity.timestamps && currentActivity.timestamps.start) {
                const startTime = new Date(currentActivity.timestamps.start);
                const now = new Date();
                const diffMinutes = Math.floor((now - startTime) / (1000 * 60));
                document.getElementById('activity-time').textContent = `${diffMinutes}m`;
            } else {
                document.getElementById('activity-time').textContent = '0m';
            }
            
            // Ustaw szczeg√≥≈Çy i stan
            document.getElementById('activity-details').textContent = currentActivity.details || '';
            document.getElementById('activity-state').textContent = currentActivity.state || '';
            document.getElementById('activity-additional').textContent = '';
            
            // Poka≈º/ukryj elementy w zale≈ºno≈õci od dostƒôpno≈õci danych
            document.getElementById('activity-details').classList.toggle('hidden', !currentActivity.details);
            document.getElementById('activity-state').classList.toggle('hidden', !currentActivity.state);
            
            // Ustaw obrazek aktywno≈õci
            if (currentActivity.assets) {
                setActivityImages(currentActivity);
            } else {
                // Domy≈õlny obrazek je≈õli brak assets
                document.getElementById('activity-image').src = 'https://via.placeholder.com/64/374151/1f2937?text=üéÆ';
                document.getElementById('activity-small-image').classList.add('hidden');
            }
            
            // Ustaw kolor obramowania na fioletowy
            setActivityBorderColor(currentActivity.type);
        }

        function updateSpotifyActivityDisplay(spotifyActivity) {
            // Ukryj Discord activity, poka≈º Spotify activity
            document.getElementById('discord-activity').classList.add('hidden');
            document.getElementById('activity').classList.add('hidden');
            
            const spotifyActivityElement = document.getElementById('spotify-activity');
            spotifyActivityElement.classList.remove('hidden');
            
            // Ustaw podstawowe informacje o utworze
            document.getElementById('spotify-song-title').textContent = spotifyActivity.details || 'Unknown Song';
            document.getElementById('spotify-song-artist').textContent = spotifyActivity.state || 'Unknown Artist';
            
            // Ustaw album (je≈õli dostƒôpny)
            if (spotifyActivity.assets && spotifyActivity.assets.large_text) {
                document.getElementById('spotify-song-album').textContent = spotifyActivity.assets.large_text;
            } else {
                document.getElementById('spotify-song-album').textContent = 'Unknown Album';
            }
            
            // Ustaw ok≈Çadkƒô albumu Spotify
            if (spotifyActivity.assets && spotifyActivity.assets.large_image) {
                const imageUrl = getSpotifyImageUrl(spotifyActivity.assets.large_image);
                document.getElementById('spotify-album-cover').src = imageUrl;
                document.getElementById('spotify-album-cover').onerror = function() {
                    // Fallback image
                    this.src = 'https://via.placeholder.com/64/1DB954/000000?text=‚ô™';
                };
            } else {
                document.getElementById('spotify-album-cover').src = 'https://via.placeholder.com/64/1DB954/000000?text=‚ô™';
            }
            
            // Ustaw czas i postƒôp utworu
            if (spotifyActivity.timestamps) {
                updateSpotifyProgress(spotifyActivity.timestamps);
                
                // Ustaw interwa≈Ç do aktualizacji postƒôpu co sekundƒô
                if (spotifyProgressInterval) {
                    clearInterval(spotifyProgressInterval);
                }
                
                spotifyProgressInterval = setInterval(() => {
                    if (currentSpotifyActivity) {
                        updateSpotifyProgress(currentSpotifyActivity.timestamps);
                    }
                }, 1000);
            }
            
            // Animacja odtwarzania
            document.getElementById('spotify-playing-animation').classList.remove('hidden');
        }

        // Funkcja: Pobieranie poprawnego URL obrazka Spotify
        function getSpotifyImageUrl(imageId) {
            // Discord przechowuje obrazki Spotify w specjalnym formacie
            if (imageId.startsWith('spotify:')) {
                // Usu≈Ñ prefix "spotify:" i u≈ºyj ID
                const cleanId = imageId.replace('spotify:', '');
                return `https://i.scdn.co/image/${cleanId}`;
            } else if (imageId.startsWith('mp:')) {
                // Media proxy Discord
                return `https://media.discordapp.net/${imageId.replace('mp:', '')}`;
            } else {
                // Bezpo≈õrednie ID Spotify
                return `https://i.scdn.co/image/${imageId}`;
            }
        }

        function updateSpotifyProgress(timestamps) {
            if (timestamps && timestamps.start && timestamps.end) {
                const startTime = new Date(timestamps.start).getTime();
                const endTime = new Date(timestamps.end).getTime();
                const currentTime = Date.now();
                
                // Sprawd≈∫ czy timestamps sƒÖ w przysz≈Ço≈õci (co oznacza nowƒÖ piosenkƒô)
                if (startTime > currentTime) {
                    // Nowa piosenka - zacznij od poczƒÖtku
                    const totalDuration = endTime - startTime;
                    const elapsed = 0;
                    const progress = 0;
                    
                    updateProgressDisplay(elapsed, totalDuration, progress);
                } else {
                    // Normalna aktualizacja
                    const totalDuration = endTime - startTime;
                    const elapsed = currentTime - startTime;
                    const progress = Math.min((elapsed / totalDuration) * 100, 100);
                    
                    updateProgressDisplay(elapsed, totalDuration, progress);
                }
            }
        }

        function updateProgressDisplay(elapsed, totalDuration, progress) {
            // Formatuj czas
            const formatTime = (ms) => {
                const minutes = Math.floor(ms / 60000);
                const seconds = Math.floor((ms % 60000) / 1000);
                return `${minutes}:${seconds.toString().padStart(2, '0')}`;
            };
            
            document.getElementById('spotify-progress-current').textContent = formatTime(elapsed);
            document.getElementById('spotify-progress-total').textContent = formatTime(totalDuration);
            document.getElementById('spotify-progress-bar').style.width = `${progress}%`;
            
            // Aktualizuj czas w nag≈Ç√≥wku
            const totalMinutes = Math.floor(totalDuration / 60000);
            document.getElementById('spotify-time').textContent = `${totalMinutes}m`;
        }

        function setActivityImages(currentActivity) {
            const activityImage = document.getElementById('activity-image');
            const smallImageElement = document.getElementById('activity-small-image');
            
            if (currentActivity.assets && currentActivity.assets.large_image) {
                const imageUrl = currentActivity.assets.large_image.startsWith('mp:') 
                    ? `https://media.discordapp.net/${currentActivity.assets.large_image.replace('mp:', '')}`
                    : `https://cdn.discordapp.com/app-assets/${currentActivity.application_id}/${currentActivity.assets.large_image}.png`;
                
                activityImage.src = imageUrl;
                activityImage.onerror = function() {
                    this.src = 'https://via.placeholder.com/64/374151/1f2937?text=üéÆ';
                };
                smallImageElement.classList.remove('hidden');
            } else {
                activityImage.src = 'https://via.placeholder.com/64/374151/1f2937?text=üéÆ';
                smallImageElement.classList.add('hidden');
            }
            
            if (currentActivity.assets && currentActivity.assets.small_image) {
                const smallImageUrl = currentActivity.assets.small_image.startsWith('mp:')
                    ? `https://media.discordapp.net/${currentActivity.assets.small_image.replace('mp:', '')}`
                    : `https://cdn.discordapp.com/app-assets/${currentActivity.application_id}/${currentActivity.assets.small_image}.png`;
                
                smallImageElement.style.backgroundImage = `url('${smallImageUrl}')`;
                smallImageElement.classList.remove('hidden');
            } else {
                smallImageElement.classList.add('hidden');
            }
        }

        function setActivityBorderColor(activityType) {
            const discordActivityElement = document.getElementById('discord-activity');
            // Ustawiamy zawsze fioletowy kolor obramowania
            const colors = ['border-green-500', 'border-purple-500', 'border-green-400', 'border-red-400', 'border-gray-500', 'border-yellow-500'];
            colors.forEach(color => discordActivityElement.classList.remove(color));
            discordActivityElement.classList.add('border-purple-500');
        }

        function getActivityType(type) {
            const types = {
                0: 'Playing',
                1: 'Streaming',
                2: 'Listening',
                3: 'Watching',
                4: 'Custom',
                5: 'Competing'
            };
            return types[type] || 'Using';
        }

        // Add custom animations and styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            .animate-fade-in {
                animation: fadeIn 0.8s ease-out;
            }
            #vanta-bg {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: -1;
            }
            .border-3 {
                border-width: 3px;
            }
            #activity-small-image {
                background-size: cover;
                background-position: center;
                border: 2px solid #1f2937;
            }
            #discord-activity, #spotify-activity {
                backdrop-filter: blur(10px);
                transition: all 0.3s ease;
            }
            #discord-activity:hover, #spotify-activity:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            }
            /* Animacja dla paska postƒôpu Spotify */
            @keyframes pulse {
                0%, 100% { transform: scaleY(1); }
                50% { transform: scaleY(1.5); }
            }
            #spotify-playing-animation div {
                animation: pulse 1s ease-in-out infinite;
            }
            /* Style for music control */
            #music-control {
                transition: all 0.3s ease;
            }
            #music-control:hover {
                transform: scale(1.1);
                box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
